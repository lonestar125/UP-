/*
First time? Check out the tutorial game:
https://sprig.hackclub.com/gallery/getting_started

@title: UP!
@author: lonestar125
@tags: []
@addedOn: 2024-00-00
*/

const player = "p"
const platform = '_'

setLegend(
  [ player, bitmap`
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333` ],
  [ platform, bitmap`
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000` ]
)

setSolids([ player, platform ])

let level = 0
const levels = [
  map`
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
...................p..................
..................___.................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................
......................................`
]

setMap(levels[level])

setPushables({
  [ player ]: [],
})



/*
onInput("w", () => {
  getFirst(player).y -= 1
})

onInput("a", () => {
  getFirst(player).x -= 1
})

onInput("d", () => {
  getFirst(player).x += 1
})
*/

/*
getFirst(player).y = 10
const playerSprite = getFirst(player)
let fallingInterval = setInterval(() => {
  if (playerSprite.y !== height() - 1) {
    playerSprite.y += 1
  }
}, 300) // adjust the speed of falling by changing the delay
*/




onInput("w", () => {
  let jumping = false
  let jumpHeight = 1
  let jumpVelocity = 1
  let gravity = 1
  let fallVelocity = 1
    if (!jumping) {
        jumping = true
        let playerSprite = getFirst(player)
        let initialY = playerSprite.y

        let jumpInterval = setInterval(() => {
            console.log(playerSprite.y)
            if (playerSprite.y > (initialY - jumpHeight) && jumpVelocity < 0) {
                playerSprite.y += jumpVelocity
                jumpVelocity += gravity
            } else {
                clearInterval(jumpInterval)
                let fallInterval = setInterval(() => {
                    if (playerSprite.y < height() - 1) {
                        playerSprite.y += fallVelocity
                        fallVelocity += gravity
                    } else {
                        clearInterval(fallInterval)
                        jumping = false
                    }
                }, 50) // adjust the falling interval for smoother descent
            }
        }, 50) // adjust the jumping interval for smoother ascent
    }
})

afterInput(() => {
    
})

afterInput(() => {
  
})
